#!/bin/sh
# ~/.ssh/rc - runs for ALL SSH sessions (non-login too). Must be silent.

# 1) Load your profile FIRST (it may reset PATH)
[ -f "$HOME/.profile" ] && . "$HOME/.profile" >/dev/null 2>&1 || true

# 2) Sane TERM for modern terminals
[ -z "${TERM:-}" ] || [ "$TERM" = "dumb" ] && TERM=xterm-256color
export TERM

# 3) Enforce required PATH LAST (idempotent)
case ":$PATH:" in *":$HOME/.local/bin:"*) ;; *) PATH="$HOME/.local/bin:$PATH";; esac
case ":$PATH:" in *":$HOME/bin:"*)       ;; *) PATH="$HOME/bin:$PATH";; esac
export PATH

# 4) Tell dotfiles we're non-interactive
export NONINTERACTIVE=1