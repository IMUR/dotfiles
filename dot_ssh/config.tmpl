# SSH Configuration for Co-lab Cluster
# Managed by chezmoi - Unified cluster SSH configuration
# Terminal compatibility for modern terminals (Ghostty, Kitty, VSCode, Cursor)

# ====================================================================
# GLOBAL SETTINGS
# ====================================================================

# Set TERM to a universal value for all SSH connections
# This prevents terminfo errors on remote systems
Host *
    SetEnv TERM=xterm-256color
    # Keep connections alive
    ServerAliveInterval 60
    ServerAliveCountMax 3
    # Enable connection multiplexing for speed
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h:%p
    ControlPersist 10m

# ====================================================================
# CO-LAB CLUSTER NODES
# ====================================================================

{{- if eq .chezmoi.hostname "cooperator" }}
# Self-SSH for this node (crtr)
Host crtr
    HostName 192.168.254.10
    User crtr
    IdentityFile ~/.ssh/id_ed25519_self
    IdentitiesOnly yes
{{- else }}
# SSH to crtr from other nodes
Host crtr
    HostName 192.168.254.10
    User crtr
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes
{{- end }}

Host zrtr
    HostName 192.168.254.11
    User zrtr
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519

{{- if eq .chezmoi.hostname "projector" }}
# Self-SSH for this node (prtr)
Host prtr
    HostName 192.168.254.20
    User prtr
    IdentityFile ~/.ssh/id_ed25519_self
    IdentitiesOnly yes
{{- else }}
# SSH to prtr from other nodes
Host prtr
    HostName 192.168.254.20
    User prtr
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519
{{- end }}

{{- if eq .chezmoi.hostname "director" }}
# Self-SSH for this node (drtr)
Host drtr
    HostName 192.168.254.30
    User drtr
    IdentityFile ~/.ssh/id_ed25519_self
    IdentitiesOnly yes
{{- else }}
# SSH to drtr from other nodes
Host drtr
    HostName 192.168.254.30
    User drtr
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519
{{- end }}

Host trtr
    HostName 192.168.254.40
    User trtr
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519    

# ====================================================================
# ALTERNATE USER ACCOUNTS
# ====================================================================

Host pprt
    HostName 192.168.254.20
    User pprt
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519

Host dprt
    HostName 192.168.254.30
    User dprt
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519

Host cprt
    HostName 192.168.254.10
    User cprt
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_ed25519

# ====================================================================
# GITHUB ACCESS
# ====================================================================

# GitHub access using personal authentication keys
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes
    AddKeysToAgent yes

# ====================================================================
# LOCAL LOOPBACK
# ====================================================================


